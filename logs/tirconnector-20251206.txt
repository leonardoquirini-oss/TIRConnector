2025-12-06 13:23:02.228 +00:00 [INF] Starting TIRConnector API
2025-12-06 13:23:02.400 +00:00 [INF] Configured API Keys (2): default-key-change-me, another-key
2025-12-06 13:23:02.470 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
2025-12-06 13:23:02.770 +00:00 [INF] Now listening on: http://[::]:8080
2025-12-06 13:23:02.777 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-06 13:23:02.780 +00:00 [INF] Hosting environment: Production
2025-12-06 13:23:02.781 +00:00 [INF] Content root path: /app
2025-12-06 13:46:38.157 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/admin/ - null null
2025-12-06 13:46:38.348 +00:00 [INF] Sending file. Request path: '/admin/index.html'. Physical path: '/app/wwwroot/admin/index.html'
2025-12-06 13:46:38.354 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/admin/index.html - 200 467 text/html 201.9104ms
2025-12-06 13:46:38.430 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/admin/config.js - null null
2025-12-06 13:46:38.437 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/admin/assets/index-Ft3KPAkZ.css - null null
2025-12-06 13:46:38.438 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/admin/assets/index-BdGqYANG.js - null null
2025-12-06 13:46:38.449 +00:00 [INF] CORS policy execution successful.
2025-12-06 13:46:38.449 +00:00 [INF] CORS policy execution successful.
2025-12-06 13:46:38.460 +00:00 [INF] Sending file. Request path: '/admin/config.js'. Physical path: '/app/wwwroot/admin/config.js'
2025-12-06 13:46:38.461 +00:00 [INF] Sending file. Request path: '/admin/assets/index-Ft3KPAkZ.css'. Physical path: '/app/wwwroot/admin/assets/index-Ft3KPAkZ.css'
2025-12-06 13:46:38.461 +00:00 [INF] Sending file. Request path: '/admin/assets/index-BdGqYANG.js'. Physical path: '/app/wwwroot/admin/assets/index-BdGqYANG.js'
2025-12-06 13:46:38.468 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/admin/assets/index-Ft3KPAkZ.css - 200 3378 text/css 28.5755ms
2025-12-06 13:46:38.468 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/admin/assets/index-BdGqYANG.js - 200 18350 text/javascript 27.6304ms
2025-12-06 13:46:38.468 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/admin/config.js - 200 59 text/javascript 35.9381ms
2025-12-06 13:46:38.481 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/api/query/templates - application/json null
2025-12-06 13:46:38.496 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API)'
2025-12-06 13:46:38.546 +00:00 [INF] Route matched with {action = "GetTemplates", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTemplates(Boolean, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 13:46:38.816 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/favicon.ico - null null
2025-12-06 13:46:38.818 +00:00 [WRN] API Key missing from request: /favicon.ico
2025-12-06 13:46:38.840 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/favicon.ico - 401 null application/json; charset=utf-8 23.4528ms
2025-12-06 13:46:39.645 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
ORDER BY q.category, q.name
2025-12-06 13:46:39.753 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TIRConnector.API.Models.Entities.QueryTemplate, TIRConnector.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType2`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TIRConnector.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-06 13:46:39.782 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API) in 1230.1853ms
2025-12-06 13:46:39.783 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API)'
2025-12-06 13:46:39.790 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/api/query/templates - 200 null application/json; charset=utf-8 1308.5152ms
2025-12-06 13:47:16.306 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:9090/api/query/templates - application/json 244
2025-12-06 13:47:16.312 +00:00 [INF] CORS policy execution successful.
2025-12-06 13:47:16.316 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.CreateTemplate (TIRConnector.API)'
2025-12-06 13:47:16.331 +00:00 [INF] Route matched with {action = "CreateTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTemplate(TIRConnector.API.Models.DTOs.QueryTemplateDto, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 13:47:16.496 +00:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-12-06 13:47:16.575 +00:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t."Value"
FROM (
    SELECT nextval('s_query_templates')::int AS "Value"
) AS t
LIMIT 1
2025-12-06 13:47:16.838 +00:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?' (DbType = Object), @p9='?', @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO query_templates (id_query_template, category, creation_date, deprecation_date, description, max_results, name, output_format, params, query_sql, timeout_seconds, update_date, version)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING active, deprecated;
2025-12-06 13:47:16.889 +00:00 [INF] Created template: ctr (ID: 1006)
2025-12-06 13:47:16.894 +00:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType5`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-06 13:47:16.950 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.CreateTemplate (TIRConnector.API) in 617.0864ms
2025-12-06 13:47:16.952 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.CreateTemplate (TIRConnector.API)'
2025-12-06 13:47:16.954 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:9090/api/query/templates - 201 null application/json; charset=utf-8 648.1555ms
2025-12-06 13:47:16.964 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/api/query/templates - application/json null
2025-12-06 13:47:16.966 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API)'
2025-12-06 13:47:16.969 +00:00 [INF] Route matched with {action = "GetTemplates", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTemplates(Boolean, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 13:47:17.153 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
ORDER BY q.category, q.name
2025-12-06 13:47:17.158 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TIRConnector.API.Models.Entities.QueryTemplate, TIRConnector.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType2`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TIRConnector.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-06 13:47:17.160 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API) in 189.7227ms
2025-12-06 13:47:17.162 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API)'
2025-12-06 13:47:17.164 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/api/query/templates - 200 null application/json; charset=utf-8 200.1326ms
2025-12-06 13:47:50.501 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - application/json 72
2025-12-06 13:47:50.507 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 13:47:50.521 +00:00 [INF] Route matched with {action = "ExecuteTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExecuteTemplate(TIRConnector.API.Models.DTOs.TemplateExecuteRequest, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 13:47:50.623 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__name_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.name = @__name_0 AND q.active AND NOT (q.deprecated)
LIMIT 1
2025-12-06 13:47:50.629 +00:00 [INF] Executing template: ctr (ID: 1006)
2025-12-06 13:48:05.948 +00:00 [ERR] Error executing template ctr
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server: Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.<>c__DisplayClass48_0.<CreateReplaceConnectionContinuation>b__0(Task`1 _)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at TIRConnector.API.Services.QueryTemplateService.ExecuteTemplateAsync(TemplateExecuteRequest request, CancellationToken cancellationToken) in /src/TIRConnector.API/Services/QueryTemplateService.cs:line 162
ClientConnectionId:00000000-0000-0000-0000-000000000000
2025-12-06 13:48:05.968 +00:00 [ERR] Error executing template: ctr
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 40 - Could not open a connection to SQL Server: Could not open a connection to SQL Server)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.<>c__DisplayClass48_0.<CreateReplaceConnectionContinuation>b__0(Task`1 _)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at TIRConnector.API.Services.QueryTemplateService.ExecuteTemplateAsync(TemplateExecuteRequest request, CancellationToken cancellationToken) in /src/TIRConnector.API/Services/QueryTemplateService.cs:line 162
   at TIRConnector.API.Controllers.QueryController.ExecuteTemplate(TemplateExecuteRequest request, CancellationToken cancellationToken) in /src/TIRConnector.API/Controllers/QueryController.cs:line 280
ClientConnectionId:00000000-0000-0000-0000-000000000000
2025-12-06 13:48:05.973 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'TIRConnector.API.Models.DTOs.ErrorResponse'.
2025-12-06 13:48:05.978 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API) in 15455.1028ms
2025-12-06 13:48:05.980 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 13:48:05.989 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - 400 null application/json; charset=utf-8 15488.5199ms
2025-12-06 13:51:00.696 +00:00 [INF] Application is shutting down...
2025-12-06 13:51:02.131 +00:00 [INF] Starting TIRConnector API
2025-12-06 13:51:02.172 +00:00 [INF] Configured API Keys (2): default-key-change-me, another-key
2025-12-06 13:51:02.203 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
2025-12-06 13:51:02.246 +00:00 [INF] Now listening on: http://[::]:8080
2025-12-06 13:51:02.247 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-06 13:51:02.248 +00:00 [INF] Hosting environment: Production
2025-12-06 13:51:02.248 +00:00 [INF] Content root path: /app
2025-12-06 13:51:05.304 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - application/json 72
2025-12-06 13:51:05.345 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 13:51:05.372 +00:00 [INF] Route matched with {action = "ExecuteTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExecuteTemplate(TIRConnector.API.Models.DTOs.TemplateExecuteRequest, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 13:51:06.194 +00:00 [INF] Executed DbCommand (34ms) [Parameters=[@__name_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.name = @__name_0 AND q.active AND NOT (q.deprecated)
LIMIT 1
2025-12-06 13:51:06.261 +00:00 [INF] Executing template: ctr (ID: 1006)
2025-12-06 13:51:06.696 +00:00 [INF] Template ctr executed successfully: 0 rows in 1197ms
2025-12-06 13:51:06.703 +00:00 [INF] Executing OkObjectResult, writing value of type 'TIRConnector.API.Models.DTOs.QueryResponse'.
2025-12-06 13:51:06.718 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API) in 1339.9642ms
2025-12-06 13:51:06.720 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 13:51:06.730 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - 200 null application/json; charset=utf-8 1426.8116ms
2025-12-06 13:58:55.950 +00:00 [INF] Application is shutting down...
2025-12-06 13:59:15.335 +00:00 [INF] Starting TIRConnector API
2025-12-06 13:59:15.370 +00:00 [INF] Configured API Keys (2): default-key-change-me, another-key
2025-12-06 13:59:15.380 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
2025-12-06 13:59:15.418 +00:00 [INF] Now listening on: http://[::]:8080
2025-12-06 13:59:15.419 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-06 13:59:15.420 +00:00 [INF] Hosting environment: Production
2025-12-06 13:59:15.420 +00:00 [INF] Content root path: /app
2025-12-06 13:59:19.961 +00:00 [INF] Application is shutting down...
2025-12-06 13:59:24.659 +00:00 [INF] Starting TIRConnector API
2025-12-06 13:59:24.699 +00:00 [INF] Configured API Keys (2): default-key-change-me, another-key
2025-12-06 13:59:24.718 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
2025-12-06 13:59:24.765 +00:00 [INF] Now listening on: http://[::]:8080
2025-12-06 13:59:24.766 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-06 13:59:24.767 +00:00 [INF] Hosting environment: Production
2025-12-06 13:59:24.767 +00:00 [INF] Content root path: /app
2025-12-06 13:59:28.438 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - application/json 72
2025-12-06 13:59:28.487 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 13:59:28.510 +00:00 [INF] Route matched with {action = "ExecuteTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExecuteTemplate(TIRConnector.API.Models.DTOs.TemplateExecuteRequest, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 13:59:29.366 +00:00 [INF] Executed DbCommand (38ms) [Parameters=[@__name_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.name = @__name_0 AND q.active AND NOT (q.deprecated)
LIMIT 1
2025-12-06 13:59:29.436 +00:00 [INF] Executing template: ctr (ID: 1006)
2025-12-06 13:59:29.670 +00:00 [INF] Executing SQL: SELECT c.* FROM TirSQL.dbo.Casse AS c
WHERE cassa like '%@ctr%'
ORDER BY c.CKData DESC
2025-12-06 13:59:29.672 +00:00 [INF] Parameters: ctr=2813
2025-12-06 13:59:29.707 +00:00 [INF] Template ctr executed successfully: 0 rows in 1061ms
2025-12-06 13:59:29.714 +00:00 [INF] Executing OkObjectResult, writing value of type 'TIRConnector.API.Models.DTOs.QueryResponse'.
2025-12-06 13:59:29.728 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API) in 1215.2468ms
2025-12-06 13:59:29.731 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 13:59:29.743 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - 200 null application/json; charset=utf-8 1306.0925ms
2025-12-06 13:59:54.116 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/api/query/templates/1004 - application/json null
2025-12-06 13:59:54.120 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API)'
2025-12-06 13:59:54.126 +00:00 [INF] Route matched with {action = "GetTemplateById", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTemplateById(Int32, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 13:59:54.146 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.id_query_template = @__id_0
LIMIT 1
2025-12-06 13:59:54.150 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`12[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-06 13:59:54.160 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API) in 33.9044ms
2025-12-06 13:59:54.161 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API)'
2025-12-06 13:59:54.164 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/api/query/templates/1004 - 200 null application/json; charset=utf-8 47.6391ms
2025-12-06 13:59:59.014 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/api/query/templates/1006 - application/json null
2025-12-06 13:59:59.018 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API)'
2025-12-06 13:59:59.019 +00:00 [INF] Route matched with {action = "GetTemplateById", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTemplateById(Int32, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 13:59:59.079 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.id_query_template = @__id_0
LIMIT 1
2025-12-06 13:59:59.081 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`12[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-06 13:59:59.083 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API) in 63.1661ms
2025-12-06 13:59:59.085 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API)'
2025-12-06 13:59:59.087 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/api/query/templates/1006 - 200 null application/json; charset=utf-8 73.0521ms
2025-12-06 14:00:26.780 +00:00 [INF] Request starting HTTP/1.1 PUT http://localhost:9090/api/query/templates/1006 - application/json 240
2025-12-06 14:00:26.785 +00:00 [INF] CORS policy execution successful.
2025-12-06 14:00:26.786 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.UpdateTemplate (TIRConnector.API)'
2025-12-06 14:00:26.791 +00:00 [INF] Route matched with {action = "UpdateTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateTemplate(Int32, TIRConnector.API.Models.DTOs.QueryTemplateDto, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 14:00:26.809 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.id_query_template = @__id_0
LIMIT 1
2025-12-06 14:00:26.934 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE query_templates SET query_sql = @p0, update_date = @p1, version = @p2
WHERE id_query_template = @p3;
2025-12-06 14:00:26.944 +00:00 [INF] Updated template: ctr (ID: 1006, Version: 2)
2025-12-06 14:00:26.946 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`12[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-06 14:00:26.948 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.UpdateTemplate (TIRConnector.API) in 155.4932ms
2025-12-06 14:00:26.949 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.UpdateTemplate (TIRConnector.API)'
2025-12-06 14:00:26.950 +00:00 [INF] Request finished HTTP/1.1 PUT http://localhost:9090/api/query/templates/1006 - 200 null application/json; charset=utf-8 169.6747ms
2025-12-06 14:00:26.954 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/api/query/templates - application/json null
2025-12-06 14:00:26.955 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API)'
2025-12-06 14:00:26.959 +00:00 [INF] Route matched with {action = "GetTemplates", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTemplates(Boolean, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 14:00:26.977 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
ORDER BY q.category, q.name
2025-12-06 14:00:26.981 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TIRConnector.API.Models.Entities.QueryTemplate, TIRConnector.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType2`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TIRConnector.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-06 14:00:26.985 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API) in 24.6824ms
2025-12-06 14:00:26.985 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API)'
2025-12-06 14:00:26.986 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/api/query/templates - 200 null application/json; charset=utf-8 32.3274ms
2025-12-06 14:00:29.097 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - application/json 72
2025-12-06 14:00:29.098 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:00:29.099 +00:00 [INF] Route matched with {action = "ExecuteTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExecuteTemplate(TIRConnector.API.Models.DTOs.TemplateExecuteRequest, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 14:00:29.107 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.name = @__name_0 AND q.active AND NOT (q.deprecated)
LIMIT 1
2025-12-06 14:00:29.109 +00:00 [INF] Executing template: ctr (ID: 1006)
2025-12-06 14:00:29.115 +00:00 [INF] Executing SQL: SELECT c.* FROM TirSQL.dbo.Casse AS c
WHERE cassa like @ctr
ORDER BY c.CKData DESC
2025-12-06 14:00:29.116 +00:00 [INF] Parameters: ctr=2813
2025-12-06 14:00:29.125 +00:00 [INF] Template ctr executed successfully: 0 rows in 23ms
2025-12-06 14:00:29.126 +00:00 [INF] Executing OkObjectResult, writing value of type 'TIRConnector.API.Models.DTOs.QueryResponse'.
2025-12-06 14:00:29.127 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API) in 27.5927ms
2025-12-06 14:00:29.128 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:00:29.129 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - 200 null application/json; charset=utf-8 31.7318ms
2025-12-06 14:00:31.322 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - application/json 72
2025-12-06 14:00:31.324 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:00:31.325 +00:00 [INF] Route matched with {action = "ExecuteTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExecuteTemplate(TIRConnector.API.Models.DTOs.TemplateExecuteRequest, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 14:00:31.332 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.name = @__name_0 AND q.active AND NOT (q.deprecated)
LIMIT 1
2025-12-06 14:00:31.333 +00:00 [INF] Executing template: ctr (ID: 1006)
2025-12-06 14:00:31.390 +00:00 [INF] Executing SQL: SELECT c.* FROM TirSQL.dbo.Casse AS c
WHERE cassa like @ctr
ORDER BY c.CKData DESC
2025-12-06 14:00:31.392 +00:00 [INF] Parameters: ctr=2813
2025-12-06 14:00:31.397 +00:00 [INF] Template ctr executed successfully: 0 rows in 70ms
2025-12-06 14:00:31.399 +00:00 [INF] Executing OkObjectResult, writing value of type 'TIRConnector.API.Models.DTOs.QueryResponse'.
2025-12-06 14:00:31.400 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API) in 74.3814ms
2025-12-06 14:00:31.401 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:00:31.402 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - 200 null application/json; charset=utf-8 79.4381ms
2025-12-06 14:00:49.759 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - application/json 74
2025-12-06 14:00:49.761 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:00:49.762 +00:00 [INF] Route matched with {action = "ExecuteTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExecuteTemplate(TIRConnector.API.Models.DTOs.TemplateExecuteRequest, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 14:00:49.769 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.name = @__name_0 AND q.active AND NOT (q.deprecated)
LIMIT 1
2025-12-06 14:00:49.771 +00:00 [INF] Executing template: ctr (ID: 1006)
2025-12-06 14:00:49.772 +00:00 [INF] Executing SQL: SELECT c.* FROM TirSQL.dbo.Casse AS c
WHERE cassa like @ctr
ORDER BY c.CKData DESC
2025-12-06 14:00:49.773 +00:00 [INF] Parameters: ctr=%2813%
2025-12-06 14:00:49.786 +00:00 [INF] Template ctr executed successfully: 10 rows in 22ms
2025-12-06 14:00:49.788 +00:00 [INF] Executing OkObjectResult, writing value of type 'TIRConnector.API.Models.DTOs.QueryResponse'.
2025-12-06 14:00:49.803 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API) in 40.2749ms
2025-12-06 14:00:49.804 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:00:49.805 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - 200 null application/json; charset=utf-8 46.0387ms
2025-12-06 14:37:08.496 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - application/json 73
2025-12-06 14:37:08.498 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:37:08.500 +00:00 [INF] Route matched with {action = "ExecuteTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExecuteTemplate(TIRConnector.API.Models.DTOs.TemplateExecuteRequest, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 14:37:08.565 +00:00 [INF] Executed DbCommand (15ms) [Parameters=[@__name_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.name = @__name_0 AND q.active AND NOT (q.deprecated)
LIMIT 1
2025-12-06 14:37:08.569 +00:00 [INF] Executing template: ctr (ID: 1006)
2025-12-06 14:37:08.922 +00:00 [INF] Executing SQL: SELECT c.* FROM TirSQL.dbo.Casse AS c
WHERE cassa like @ctr
ORDER BY c.CKData DESC
2025-12-06 14:37:08.924 +00:00 [INF] Parameters: ctr=%283%
2025-12-06 14:37:08.949 +00:00 [INF] Template ctr executed successfully: 2 rows in 444ms
2025-12-06 14:37:08.951 +00:00 [INF] Executing OkObjectResult, writing value of type 'TIRConnector.API.Models.DTOs.QueryResponse'.
2025-12-06 14:37:08.953 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API) in 452.3346ms
2025-12-06 14:37:08.955 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:37:08.957 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - 200 null application/json; charset=utf-8 461.4961ms
2025-12-06 14:37:29.572 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - application/json 73
2025-12-06 14:37:29.573 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:37:29.574 +00:00 [INF] Route matched with {action = "ExecuteTemplate", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExecuteTemplate(TIRConnector.API.Models.DTOs.TemplateExecuteRequest, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 14:37:29.580 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.name = @__name_0 AND q.active AND NOT (q.deprecated)
LIMIT 1
2025-12-06 14:37:29.582 +00:00 [INF] Executing template: ctr (ID: 1006)
2025-12-06 14:37:29.584 +00:00 [INF] Executing SQL: SELECT c.* FROM TirSQL.dbo.Casse AS c
WHERE cassa like @ctr
ORDER BY c.CKData DESC
2025-12-06 14:37:29.585 +00:00 [INF] Parameters: ctr=%281%
2025-12-06 14:37:29.601 +00:00 [INF] Template ctr executed successfully: 103 rows in 24ms
2025-12-06 14:37:29.602 +00:00 [INF] Executing OkObjectResult, writing value of type 'TIRConnector.API.Models.DTOs.QueryResponse'.
2025-12-06 14:37:29.606 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API) in 30.6131ms
2025-12-06 14:37:29.607 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.ExecuteTemplate (TIRConnector.API)'
2025-12-06 14:37:29.609 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:9090/api/Query/templates/execute - 200 null application/json; charset=utf-8 37.2093ms
2025-12-06 15:28:59.040 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/api/query/templates/1006 - application/json null
2025-12-06 15:28:59.055 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API)'
2025-12-06 15:28:59.060 +00:00 [INF] Route matched with {action = "GetTemplateById", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTemplateById(Int32, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 15:28:59.144 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.id_query_template = @__id_0
LIMIT 1
2025-12-06 15:28:59.154 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`12[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-06 15:28:59.163 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API) in 101.355ms
2025-12-06 15:28:59.164 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API)'
2025-12-06 15:28:59.167 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/api/query/templates/1006 - 200 null application/json; charset=utf-8 128.6421ms
2025-12-06 15:29:04.849 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/api/query/templates/1006 - application/json null
2025-12-06 15:29:04.853 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API)'
2025-12-06 15:29:04.857 +00:00 [INF] Route matched with {action = "GetTemplateById", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTemplateById(Int32, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 15:29:04.872 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
WHERE q.id_query_template = @__id_0
LIMIT 1
2025-12-06 15:29:04.876 +00:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`12[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-06 15:29:04.879 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API) in 20.1328ms
2025-12-06 15:29:04.881 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplateById (TIRConnector.API)'
2025-12-06 15:29:04.885 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/api/query/templates/1006 - 200 null application/json; charset=utf-8 35.1776ms
2025-12-06 15:43:28.829 +00:00 [INF] Application is shutting down...
2025-12-06 15:44:00.449 +00:00 [INF] Starting TIRConnector API
2025-12-06 15:44:00.501 +00:00 [INF] Configured API Keys (2): default-key-change-me, another-key
2025-12-06 15:44:00.526 +00:00 [INF] Container cache sync scheduler started with cron: 0 */5 * * * *
2025-12-06 15:44:00.535 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
2025-12-06 15:44:00.597 +00:00 [INF] Now listening on: http://[::]:8080
2025-12-06 15:44:00.597 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-06 15:44:00.598 +00:00 [INF] Hosting environment: Production
2025-12-06 15:44:00.599 +00:00 [INF] Content root path: /app
2025-12-06 15:45:00.003 +00:00 [INF] Scheduled container cache sync starting
2025-12-06 15:45:14.093 +00:00 [INF] Connected to Valkey at valkey-service:6379
2025-12-06 15:45:14.105 +00:00 [INF] Starting container cache sync
2025-12-06 15:45:15.380 +00:00 [INF] Loaded 2186 containers from database
2025-12-06 15:45:21.096 +00:00 [ERR] Error during container cache sync
StackExchange.Redis.RedisConnectionException: The message timed out in the backlog attempting to send because no connection became available (5000ms) - Last Connection Exception: It was not possible to connect to the redis server(s). ConnectTimeout, command=ZSCAN, timeout: 5000, inst: 0, qu: 0, qs: 0, aw: False, bw: CheckingForTimeout, rs: NotStarted, ws: Initializing, in: 0, last-in: 0, cur-in: 0, sync-ops: 0, async-ops: 1, serverEndpoint: valkey-service:6379, conn-sec: n/a, aoc: 0, mc: 1/1/0, mgr: 10 of 10 available, clientName: fb397031bc85(SE.Redis-v2.7.33.41805), IOCP: (Busy=0,Free=1000,Min=1,Max=1000), WORKER: (Busy=1,Free=32766,Min=24,Max=32767), POOL: (Threads=8,QueuedItems=0,CompletedItems=333,Timers=7), v: 2.7.33.41805 (Please take a look at this article for some common client-side issues that can cause timeouts: https://stackexchange.github.io/StackExchange.Redis/Timeouts)
 ---> StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). ConnectTimeout
   --- End of inner exception stack trace ---
   at TIRConnector.API.Services.ValkeyService.SortedSetScanAsync(String key, String pattern, Int32 pageSize, CancellationToken cancellationToken)+MoveNext() in /src/TIRConnector.API/Services/ValkeyService.cs:line 97
   at TIRConnector.API.Services.ValkeyService.SortedSetScanAsync(String key, String pattern, Int32 pageSize, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at TIRConnector.API.Services.ContainerCacheService.SyncContainersAsync(CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheService.cs:line 44
   at TIRConnector.API.Services.ContainerCacheService.SyncContainersAsync(CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheService.cs:line 44
2025-12-06 15:45:21.140 +00:00 [ERR] Error during scheduled container cache sync
StackExchange.Redis.RedisConnectionException: The message timed out in the backlog attempting to send because no connection became available (5000ms) - Last Connection Exception: It was not possible to connect to the redis server(s). ConnectTimeout, command=ZSCAN, timeout: 5000, inst: 0, qu: 0, qs: 0, aw: False, bw: CheckingForTimeout, rs: NotStarted, ws: Initializing, in: 0, last-in: 0, cur-in: 0, sync-ops: 0, async-ops: 1, serverEndpoint: valkey-service:6379, conn-sec: n/a, aoc: 0, mc: 1/1/0, mgr: 10 of 10 available, clientName: fb397031bc85(SE.Redis-v2.7.33.41805), IOCP: (Busy=0,Free=1000,Min=1,Max=1000), WORKER: (Busy=1,Free=32766,Min=24,Max=32767), POOL: (Threads=8,QueuedItems=0,CompletedItems=333,Timers=7), v: 2.7.33.41805 (Please take a look at this article for some common client-side issues that can cause timeouts: https://stackexchange.github.io/StackExchange.Redis/Timeouts)
 ---> StackExchange.Redis.RedisConnectionException: It was not possible to connect to the redis server(s). ConnectTimeout
   --- End of inner exception stack trace ---
   at TIRConnector.API.Services.ValkeyService.SortedSetScanAsync(String key, String pattern, Int32 pageSize, CancellationToken cancellationToken)+MoveNext() in /src/TIRConnector.API/Services/ValkeyService.cs:line 97
   at TIRConnector.API.Services.ValkeyService.SortedSetScanAsync(String key, String pattern, Int32 pageSize, CancellationToken cancellationToken)+System.Threading.Tasks.Sources.IValueTaskSource<System.Boolean>.GetResult()
   at TIRConnector.API.Services.ContainerCacheService.SyncContainersAsync(CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheService.cs:line 44
   at TIRConnector.API.Services.ContainerCacheService.SyncContainersAsync(CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheService.cs:line 44
   at TIRConnector.API.Services.ContainerCacheSyncJob.ExecuteSyncAsync(CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheSyncJob.cs:line 82
2025-12-06 15:47:48.841 +00:00 [INF] Application is shutting down...
2025-12-06 15:47:48.849 +00:00 [INF] Container cache sync scheduler stopped
2025-12-06 15:48:02.715 +00:00 [INF] Starting TIRConnector API
2025-12-06 15:48:02.758 +00:00 [INF] Configured API Keys (2): default-key-change-me, another-key
2025-12-06 15:48:02.779 +00:00 [INF] Container cache sync scheduler started with cron: 0 */5 * * * *
2025-12-06 15:48:02.790 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
2025-12-06 15:48:02.828 +00:00 [INF] Now listening on: http://[::]:8080
2025-12-06 15:48:02.829 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-06 15:48:02.830 +00:00 [INF] Hosting environment: Production
2025-12-06 15:48:02.830 +00:00 [INF] Content root path: /app
2025-12-06 15:49:59.993 +00:00 [INF] Scheduled container cache sync starting
2025-12-06 15:50:00.204 +00:00 [INF] Connected to Valkey at 172.28.234.122:6379
2025-12-06 15:50:00.207 +00:00 [INF] Starting container cache sync
2025-12-06 15:50:00.803 +00:00 [INF] Loaded 2186 containers from database
2025-12-06 15:50:00.819 +00:00 [INF] Found 0 containers in Valkey cache
2025-12-06 15:50:09.899 +00:00 [INF] Container cache sync completed: Added=2186, Removed=0, Total=2186, Time=9691ms
2025-12-06 15:50:09.902 +00:00 [INF] Scheduled container cache sync completed: Added=2186, Removed=0, Total=2186, Time=9691ms
2025-12-06 15:54:59.969 +00:00 [INF] Scheduled container cache sync starting
2025-12-06 15:54:59.974 +00:00 [INF] Starting container cache sync
2025-12-06 15:55:00.137 +00:00 [INF] Loaded 2186 containers from database
2025-12-06 15:55:00.155 +00:00 [INF] Found 2186 containers in Valkey cache
2025-12-06 15:55:08.863 +00:00 [INF] Container cache sync completed: Added=0, Removed=0, Total=2186, Time=8889ms
2025-12-06 15:55:08.864 +00:00 [INF] Scheduled container cache sync completed: Added=0, Removed=0, Total=2186, Time=8889ms
2025-12-06 15:59:59.968 +00:00 [INF] Scheduled container cache sync starting
2025-12-06 15:59:59.980 +00:00 [INF] Starting container cache sync
2025-12-06 16:00:00.376 +00:00 [INF] Loaded 2186 containers from database
2025-12-06 16:00:00.397 +00:00 [INF] Found 2186 containers in Valkey cache
2025-12-06 16:00:09.177 +00:00 [INF] Container cache sync completed: Added=0, Removed=0, Total=2186, Time=9197ms
2025-12-06 16:00:09.178 +00:00 [INF] Scheduled container cache sync completed: Added=0, Removed=0, Total=2186, Time=9197ms
2025-12-06 16:00:56.248 +00:00 [INF] Application is shutting down...
2025-12-06 16:00:56.256 +00:00 [INF] Container cache sync scheduler stopped
2025-12-06 16:01:10.624 +00:00 [INF] Starting TIRConnector API
2025-12-06 16:01:10.679 +00:00 [INF] Configured API Keys (2): default-key-change-me, another-key
2025-12-06 16:01:10.696 +00:00 [INF] Container cache sync scheduler started with cron: 0 */5 * * * *
2025-12-06 16:01:10.703 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
2025-12-06 16:01:10.740 +00:00 [INF] Now listening on: http://[::]:8080
2025-12-06 16:01:10.741 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-06 16:01:10.741 +00:00 [INF] Hosting environment: Production
2025-12-06 16:01:10.742 +00:00 [INF] Content root path: /app
2025-12-06 16:04:59.981 +00:00 [INF] Scheduled container cache sync starting
2025-12-06 16:05:00.208 +00:00 [INF] Connected to Valkey at 172.28.234.122:6379
2025-12-06 16:05:00.210 +00:00 [INF] Starting container cache sync
2025-12-06 16:05:00.715 +00:00 [INF] Loaded 2186 containers from database
2025-12-06 16:05:00.745 +00:00 [INF] Found 2186 containers in Valkey cache
2025-12-06 16:05:00.756 +00:00 [ERR] Error during container cache sync
StackExchange.Redis.RedisServerException: WRONGTYPE Operation against a key holding the wrong kind of value
   at TIRConnector.API.Services.ValkeyService.HashSetAsync(String key, HashEntry[] entries, CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ValkeyService.cs:line 124
   at TIRConnector.API.Services.ContainerCacheService.AddContainerToCacheAsync(ContainerDto container, CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheService.cs:line 188
   at TIRConnector.API.Services.ContainerCacheService.SyncContainersAsync(CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheService.cs:line 70
2025-12-06 16:05:00.769 +00:00 [ERR] Error during scheduled container cache sync
StackExchange.Redis.RedisServerException: WRONGTYPE Operation against a key holding the wrong kind of value
   at TIRConnector.API.Services.ValkeyService.HashSetAsync(String key, HashEntry[] entries, CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ValkeyService.cs:line 124
   at TIRConnector.API.Services.ContainerCacheService.AddContainerToCacheAsync(ContainerDto container, CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheService.cs:line 188
   at TIRConnector.API.Services.ContainerCacheService.SyncContainersAsync(CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheService.cs:line 70
   at TIRConnector.API.Services.ContainerCacheSyncJob.ExecuteSyncAsync(CancellationToken cancellationToken) in /src/TIRConnector.API/Services/ContainerCacheSyncJob.cs:line 82
2025-12-06 16:06:26.155 +00:00 [INF] Application is shutting down...
2025-12-06 16:06:26.167 +00:00 [INF] Container cache sync scheduler stopped
2025-12-06 16:06:39.700 +00:00 [INF] Starting TIRConnector API
2025-12-06 16:06:39.735 +00:00 [INF] Configured API Keys (2): default-key-change-me, another-key
2025-12-06 16:06:39.748 +00:00 [INF] Container cache sync scheduler started with cron: 0 */5 * * * *
2025-12-06 16:06:39.756 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'http://+:8080'.
2025-12-06 16:06:39.795 +00:00 [INF] Now listening on: http://[::]:8080
2025-12-06 16:06:39.796 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-06 16:06:39.796 +00:00 [INF] Hosting environment: Production
2025-12-06 16:06:39.797 +00:00 [INF] Content root path: /app
2025-12-06 16:09:59.985 +00:00 [INF] Scheduled container cache sync starting
2025-12-06 16:10:00.194 +00:00 [INF] Connected to Valkey at 172.28.234.122:6379
2025-12-06 16:10:00.198 +00:00 [INF] Starting container cache sync
2025-12-06 16:10:00.828 +00:00 [INF] Loaded 2186 containers from database
2025-12-06 16:10:00.839 +00:00 [INF] Found 0 containers in Valkey cache
2025-12-06 16:10:13.698 +00:00 [INF] Container cache sync completed: Added=2186, Removed=0, Total=2186, Time=13500ms
2025-12-06 16:10:13.700 +00:00 [INF] Scheduled container cache sync completed: Added=2186, Removed=0, Total=2186, Time=13500ms
2025-12-06 16:11:27.805 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/admin/ - null null
2025-12-06 16:11:27.953 +00:00 [INF] Sending file. Request path: '/admin/index.html'. Physical path: '/app/wwwroot/admin/index.html'
2025-12-06 16:11:27.964 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/admin/index.html - 200 467 text/html 160.0671ms
2025-12-06 16:11:28.117 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/admin/config.js - null null
2025-12-06 16:11:28.133 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/admin/assets/index-Ft3KPAkZ.css - null null
2025-12-06 16:11:28.134 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/admin/assets/index-BPipi2ew.js - null null
2025-12-06 16:11:28.147 +00:00 [INF] Sending file. Request path: '/admin/config.js'. Physical path: '/app/wwwroot/admin/config.js'
2025-12-06 16:11:28.150 +00:00 [INF] CORS policy execution successful.
2025-12-06 16:11:28.150 +00:00 [INF] CORS policy execution successful.
2025-12-06 16:11:28.152 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/admin/config.js - 200 59 text/javascript 35.7665ms
2025-12-06 16:11:28.157 +00:00 [INF] Sending file. Request path: '/admin/assets/index-BPipi2ew.js'. Physical path: '/app/wwwroot/admin/assets/index-BPipi2ew.js'
2025-12-06 16:11:28.157 +00:00 [INF] Sending file. Request path: '/admin/assets/index-Ft3KPAkZ.css'. Physical path: '/app/wwwroot/admin/assets/index-Ft3KPAkZ.css'
2025-12-06 16:11:28.158 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/admin/assets/index-BPipi2ew.js - 200 18354 text/javascript 24.2287ms
2025-12-06 16:11:28.159 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/admin/assets/index-Ft3KPAkZ.css - 200 3378 text/css 25.8704ms
2025-12-06 16:11:28.310 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/api/query/templates - application/json null
2025-12-06 16:11:28.317 +00:00 [INF] Executing endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API)'
2025-12-06 16:11:28.346 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/favicon.ico - null null
2025-12-06 16:11:28.346 +00:00 [INF] Route matched with {action = "GetTemplates", controller = "Query"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTemplates(Boolean, System.Threading.CancellationToken) on controller TIRConnector.API.Controllers.QueryController (TIRConnector.API).
2025-12-06 16:11:28.349 +00:00 [WRN] API Key missing from request: /favicon.ico
2025-12-06 16:11:28.368 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/favicon.ico - 401 null application/json; charset=utf-8 21.9246ms
2025-12-06 16:11:29.050 +00:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT q.id_query_template, q.active, q.category, q.creation_date, q.deprecated, q.deprecation_date, q.description, q.max_results, q.name, q.output_format, q.params, q.query_sql, q.timeout_seconds, q.update_date, q.version
FROM query_templates AS q
ORDER BY q.category, q.name
2025-12-06 16:11:29.148 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[TIRConnector.API.Models.Entities.QueryTemplate, TIRConnector.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType2`11[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TIRConnector.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-06 16:11:29.169 +00:00 [INF] Executed action TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API) in 817.7553ms
2025-12-06 16:11:29.171 +00:00 [INF] Executed endpoint 'TIRConnector.API.Controllers.QueryController.GetTemplates (TIRConnector.API)'
2025-12-06 16:11:29.176 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/api/query/templates - 200 null application/json; charset=utf-8 865.5541ms
2025-12-06 16:11:32.733 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/swagger/index.html - null null
2025-12-06 16:11:32.845 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/swagger/index.html - 200 null text/html;charset=utf-8 111.9296ms
2025-12-06 16:11:32.929 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/swagger/swagger-ui.css - null null
2025-12-06 16:11:32.929 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/swagger/swagger-ui-bundle.js - null null
2025-12-06 16:11:32.933 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/swagger/swagger-ui-standalone-preset.js - null null
2025-12-06 16:11:32.962 +00:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-12-06 16:11:32.964 +00:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-12-06 16:11:32.965 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/swagger/swagger-ui.css - 200 144929 text/css 36.5892ms
2025-12-06 16:11:32.967 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/swagger/swagger-ui-standalone-preset.js - 200 312163 text/javascript 34.0772ms
2025-12-06 16:11:32.974 +00:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-12-06 16:11:32.977 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/swagger/swagger-ui-bundle.js - 200 1061536 text/javascript 47.3558ms
2025-12-06 16:11:33.525 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/swagger/v1/swagger.json - null null
2025-12-06 16:11:33.528 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/swagger/favicon-32x32.png - null null
2025-12-06 16:11:33.530 +00:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-12-06 16:11:33.532 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/swagger/favicon-32x32.png - 200 628 image/png 3.1296ms
2025-12-06 16:11:33.642 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 116.4636ms
2025-12-06 16:13:31.806 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:9090/favicon.ico - null null
2025-12-06 16:13:31.807 +00:00 [WRN] API Key missing from request: /favicon.ico
2025-12-06 16:13:31.808 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:9090/favicon.ico - 401 null application/json; charset=utf-8 2.0792ms
